{"ast":null,"code":"import _regeneratorRuntime from\"/home/tanjim/Projects/ExpenseTracker/app/node_modules/@babel/runtime/regenerator\";import{jsx as _jsx}from\"react/jsx-runtime\";import _asyncToGenerator from\"/home/tanjim/Projects/ExpenseTracker/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/tanjim/Projects/ExpenseTracker/app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"/home/tanjim/Projects/ExpenseTracker/app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/tanjim/Projects/ExpenseTracker/app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{createContext,useReducer}from\"react\";import axios from\"axios\";//Reducer\nvar AppReducer=function AppReducer(state,action){switch(action.type){case'GET_TRANSACTIONS':console.log(state);return _objectSpread(_objectSpread({},state),{},{loading:false,transactions:action.payload});case'ERROR':return _objectSpread(_objectSpread({},state),{},{error:action.payload});case'DELETE':return _objectSpread(_objectSpread({},state),{},{transactions:state.transactions.filter(function(trans){return trans._id!==action.payload;})});case'ADD':return _objectSpread(_objectSpread({},state),{},{transactions:[].concat(_toConsumableArray(state.transactions),[action.payload])});default:return state;}};var initialState={transactions:[],error:null,loading:true};//Create context\nexport var GlobalContext=/*#__PURE__*/createContext(initialState);//Provider component\nexport var GlobalProvider=function GlobalProvider(_ref){var children=_ref.children;var _useReducer=useReducer(AppReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];//Actions\nfunction getTransactions(){return _getTransactions.apply(this,arguments);}function _getTransactions(){_getTransactions=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/api/v1/');case 3:res=_context.sent;dispatch({type:'GET_TRANSACTIONS',payload:res.data.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:'ERROR',payload:_context.t0.response.data.error});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return _getTransactions.apply(this,arguments);}function deleteTransaction(_x){return _deleteTransaction.apply(this,arguments);}function _deleteTransaction(){_deleteTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.delete(\"/api/v1/\".concat(id));case 2:try{dispatch({type:'DELETE',payload:id});}catch(error){dispatch({type:'ERROR',payload:error.response.data.error});}case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _deleteTransaction.apply(this,arguments);}function addTransaction(_x2){return _addTransaction.apply(this,arguments);}function _addTransaction(){_addTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(trans){var config,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:config={headers:{'Content-Type':'application/json'}};_context3.prev=1;_context3.next=4;return axios.post('/api/v1/',trans,config);case 4:res=_context3.sent;dispatch({type:'ADD',payload:trans});_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);dispatch({type:'ERROR',payload:_context3.t0.response.data.error});case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[1,8]]);}));return _addTransaction.apply(this,arguments);}return/*#__PURE__*/_jsx(GlobalContext.Provider,{value:{transactions:state.transactions,loading:state.loading,error:state.error,getTransactions:getTransactions,deleteTransaction:deleteTransaction,addTransaction:addTransaction},children:children});};","map":{"version":3,"sources":["/home/tanjim/Projects/ExpenseTracker/app/src/context/GlobalState.js"],"names":["createContext","useReducer","axios","AppReducer","state","action","type","console","log","loading","transactions","payload","error","filter","trans","_id","initialState","GlobalContext","GlobalProvider","children","dispatch","getTransactions","get","res","data","response","deleteTransaction","id","delete","addTransaction","config","headers","post"],"mappings":"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","sourcesContent":["import { createContext, useReducer } from \"react\";\nimport axios from \"axios\";\n//Reducer\n\nconst AppReducer = (state, action) => {\n    switch (action.type) {\n        case 'GET_TRANSACTIONS':\n            console.log(state)\n            return {\n                ...state,\n                loading: false,\n                transactions: action.payload\n            }\n        case 'ERROR':\n            return {\n                ...state,\n                error: action.payload\n            }\n\n        case 'DELETE':\n            return {\n                ...state,\n                transactions: state.transactions.filter(trans => trans._id !== action.payload)\n            }\n        case 'ADD':\n            return {\n                ...state,\n                transactions: [...state.transactions, action.payload]\n            }\n        default:\n            return state\n    }\n}\n\n\n\n\n\n\n\n\n\nconst initialState = {\n    transactions: [],\n    error: null,\n    loading: true\n};\n//Create context\nexport const GlobalContext = createContext(initialState)\n\n//Provider component\nexport const GlobalProvider = ({ children }) => {\n    const [state, dispatch] = useReducer(AppReducer, initialState);\n    //Actions\n\n    async function getTransactions() {\n        try {\n            const res = await axios.get('/api/v1/');\n            dispatch({\n                type: 'GET_TRANSACTIONS',\n                payload: res.data.data\n            })\n        } catch (err) {\n            dispatch({\n                type: 'ERROR',\n                payload: err.response.data.error,\n            })\n        }\n    }\n    async function deleteTransaction(id) {\n        await axios.delete(`/api/v1/${id}`)\n        try {\n            dispatch({\n                type: 'DELETE',\n                payload: id,\n            })\n\n        } catch (error) {\n            dispatch({\n                type: 'ERROR',\n                payload: error.response.data.error,\n            })\n        }\n    }\n    async function addTransaction(trans) {\n        const config = {\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        }\n        try {\n            const res = await axios.post('/api/v1/', trans, config)\n            dispatch({\n                type: 'ADD',\n                payload: trans,\n            })\n\n        } catch (err) {\n            dispatch({\n                type: 'ERROR',\n                payload: err.response.data.error,\n            })\n        }\n    }\n    return (\n        <GlobalContext.Provider value={{\n            transactions: state.transactions,\n            loading: state.loading,\n            error: state.error,\n            getTransactions,\n\n            deleteTransaction,\n            addTransaction,\n        }}>\n            {children}\n        </GlobalContext.Provider>\n    )\n}"]},"metadata":{},"sourceType":"module"}